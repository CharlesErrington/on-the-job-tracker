<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="../public/css/ds_digital/DS-DIGI.TTF" type="text/css">
    <script src="https://kit.fontawesome.com/a79293c569.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="body-container">
        <div class="input-container">
            <div>
                <div class="grid-container">
                    <h2>Start Time</h2>

                    <!-- Display the start time -->
                    <% if (startTime) { %>
                        <!-- Display the start time -->
                        <li class='start-time' data-id='<%=startTime._id%>'>
                        <span id="startTimeSpan"><%= startTime.startTime %></span>
                        
                        </li>
                        <span class='delStartTime'><i class="fas fa-trash"></i></span>
                    <% } %>
                </div>
                <% if (!startTime) { %>
                    <form id="startTimeForm" action="/jobs/startTime" method="POST">
                        <label for="startHour">Start Hour:</label>
                        <select name="startHour" id="startHour">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                        </select>
                        <label for="startMinute">Minutes:</label>
                        <select name="startMinute" id="startMinute">
                            <option value="0">00</option>
                            <option value="5">05</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                            <option value="25">25</option>
                            <option value="30">30</option>
                            <option value="35">35</option>
                            <option value="40">40</option>
                            <option value="45">45</option>
                            <option value="50">50</option>
                            <option value="55">55</option>
                        </select>
                        <input type="submit">
                    </form>
                <% } %>
            </div>
        </div>

        <div class="input-container">
            <div class="grid-container">
                <h2>Finish Time</h2>
            
            
                <% if (finishTime) { %>
                    <!-- Display the start time -->
                    <li class='finish-time'data-id='<%=finishTime._id%>'>
                    <span id="finishTimeSpan"><%= finishTime.finishTime %></span>
                    
                    </li>
                    <span class='delFinishTime'><i class="fas fa-trash"></i></span>
                <% } %>
            </div>
                <% if (!finishTime) { %>
                    <form id="finishTimeForm" action="/jobs/finishTime" method="POST">
                        <label for="finishHour">Finish Hour:</label>
                        <select name="finishHour" id="finishHour">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                        </select>
                        <label for="finishMinute">Minutes:</label>
                        <select name="finishMinute" id="finishMinute">
                            <option value="0">00</option>
                            <option value="5">05</option>
                            <option value="10">10</option>
                            <option value="15">15</option>
                            <option value="20">20</option>
                            <option value="25">25</option>
                            <option value="30">30</option>
                            <option value="35">35</option>
                            <option value="40">40</option>
                            <option value="45">45</option>
                            <option value="50">50</option>
                            <option value="55">55</option>
                        </select>
                        <input type="submit">
                    </form>
                <% } %>
            
        </div>

        <div class="input-container">
            <div class="grid-container">
                <h2>Start Location</h2>

                <% if (startLocation) { %>
                    <!-- Display the start time -->
                    <li class='start-location' data-id='<%=startLocation._id%>'>
                    <span id="startLocationSpan"><%= startLocation.startLocation %></span>
                    
                    </li>
                    <span class='delStartLocation'><i class="fas fa-trash"></i></span>
                <% } %>
            </div>

            <% if (!startLocation) { %>
                <form action="/jobs/addStartLocation" method="POST">
                    <input type="text" placeholder="Enter start location's postcode" name='startLocation'>
                    <input type="submit">
                </form>
            <% } %>
        </div>

        <div class="input-container">
            <h1>Jobs</h1>
            <p id="finishTimeWarning"></p>
            <ul>
                    <div class="grid-container">
                        <h3>Postcode</h3>
                        <h3>Estimated Job Length</h3>
                        <h3></h3>
                    </div>

                    <% jobs.forEach( el => { %>
                        <div class="job-item">
                            
                            <li class='jobItem' data-id='<%=el._id%>'>
                                <div class="grid-container">
                                    
                                    
                                    <span class="postcodeParent"><input type="checkbox" id="<%= el._id %>" class="job-checkbox" checked><span class="postcodeSpan">Postcode: <%= el.postCode %> </span></span>
                                    
                                    
                                    
                                    <span>Estimated job length: <%= el.estimatedJobLengthHours %> Hours <%= el.estimatedJobLengthMinutes %> Minutes </span>
                                    
                                    <span class='del'><i class="fas fa-trash"></i></span>
                                </div>
                                
                            </li>
                        </div>
                    <% }) %>  
                  
            </ul>
        </div>
        

        

        <form action="/jobs/createJob" method='POST'>
            <input type="text" placeholder="Enter jobs postcode" name='postCode'>
            <input type="text" placeholder="Enter customer ID" name='customerId'>
            <label for="hours">Estimated job length (hours):</label>
            <select id="hours" name="hours">
                <option value="0">0</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
            </select>
            <label for="minutes">Estimated job length (minutes):</label>
            <select id="minutes" name="minutes">
                <option value="0">00</option>
                <option value="5">05</option>
                <option value="10">10</option>
                <option value="15">15</option>
                <option value="20">20</option>
                <option value="25">25</option>
                <option value="30">30</option>
                <option value="35">35</option>
                <option value="40">40</option>
                <option value="45">45</option>
                <option value="50">50</option>
                <option value="55">55</option>
            </select>
            <input type="submit">
        </form>


        

        <div class="jumbotron">
            <div class="container-fluid">

        
                <h1>Calculate job time</h1>
                
                <div class="col-xs-offset-2 col-xs-10">
                    <button id="routebtn" class="btn btn-info btn-lg"><i class="fa-solid fa-diamond-turn-right"></i></button>
                </div>
            </div>
            <div class="container-fluid">
                <div id="googleMap"></div>
                <div id="output">

                </div>
            </div>
        </div>

        <a href="/logout">Logout</a>

        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD3fGF38PYrTPfqMOqZzkdE94cgnvn07GQ&libraries=places"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="js/main.js"></script>
        </div>   
    </body>
     
</html>